<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<title>Document</title>
</head>
<body>


<!-- Tab links -->
<div class="tab">
    <button class="tablinks" onclick="openCity(event, 'Units')">Units</button>
    <button class="tablinks" onclick="openCity(event, 'Views')">Views</button>
</div>
  
  <!-- Tab content -->
<div id="Units" class="tabcontent">
    <table class="table table-striped table-bordered" cellspacing="0" width="50%" margin="20px">
       
        <thead>
            <tr>
              <th class="th-sm">Fire
              </th>
              <th class="th-sm">Water
              </th>
              <th class="th-sm">Wind
              </th>
              <th class="th-sm">Thunder
              </th>
              <th class="th-sm">Light
              </th>
              <th class="th-sm">Dark
              </th>

            </tr>
          </thead>

          <tbody>
            <tr>
                <td id="fire">  
                    <img  id="mela"
                          src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/st_mela.png" 
                          style="width:50px; height:50px;"
                          onclick=turnGrey(id)
                          value="1"
                    >
                </td>
              
                <td>
                    <img  id="merl"
                          src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/cry_merl.png"
                          style="width:50px; height:50px"
                          onclick=turnGrey(id)
                          value="1">
                </td>
                <td>
                    <img  id="king"
                          src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/ts_king.png" 
                          style="width:50px; height:50px" 
                          onclick=turnGrey(id)
                          value="1">
                </td>
                <td>
                    <img  id="nyx"
                          src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/st_niku.png" 
                          style="width:50px; height:50px"
                          onclick=turnGrey(id)
                          value="1">
                </td>
                <td>
                    <img  id="emmel" 
                          src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/emme.png" 
                          style="width:50px; height:50px"
                          onclick=turnGrey(id)
                          value="1">
                </td>
                <td>
                    <img  id="theresa"
                          src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/tere.png"
                          style="width:50px; height:50px"
                          onclick=turnGrey(id)
                          value="1">
                </td>
            </tr>


        </tbody>
    </table>
</div>
  
<div id="Views" class="tabcontent">


  <table class="table table-striped table-bordered" cellspacing="0" width="50%" margin="20px">
       
    <thead>
        <tr>
          <th class="th-sm">Fire
          </th>
          <th class="th-sm">Water
          </th>
          <th class="th-sm">Wind
          </th>
          <th class="th-sm">Thunder
          </th>
          <th class="th-sm">Light
          </th>
          <th class="th-sm">Dark
          </th>

        </tr>
      </thead>

      <tbody>
        <tr>
            <td id="fire">  
                <img src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/st_mela.png" 
                     style="width:50px; height:50px;"
                     onclick=function2()
                >
            </td>
          
            <td>
                <img src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/cry_merl.png" style="width:50px; height:50px" onclick=>
            </td>
            <td>
                <img src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/ts_king.png" style="width:50px; height:50px" onclick=>
            </td>
            <td>
                <img src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/st_niku.png" style="width:50px; height:50px" onclick=>
            </td>
            <td>
                <img src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/emme.png" style="width:50px; height:50px" onclick=function1()>
            </td>
            <td>
                <img src="https://cdn.alchemistcodedb.com/file/bb-acdb/images/PortraitsM/tere.png" style="width:50px; height:50px" onclick=>
            </td>
        </tr>


    </tbody>
</table>


    <table id="dtBasicExample" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th class="th-sm">Name
            </th>
            <th class="th-sm">Kaigan Levels
            </th>
            <th class="th-sm">Goal Kaigan
            </th>
            <th class="th-sm">Shard Amount
            </th>
            <th class="th-sm">Goal Shards
            </th>
            <th class="th-sm">Notes
            </th>
          </tr>
        </thead>

        <tbody>
            <tr>
                <td id="name1"></td>
                <td id="kaigan1"></td>
                <td id="goalkaigan1"></td>
                <td id="shards1"></td>
                <td id="goalshards1"></td>
                <td id="notes1"></td>
            </tr>
        </tbody>
    </table>          

  </div>
  



</body>

<!-- <script type="text/javascript" src="program.js"></script> -->
<script type="text/javascript"> 

var unitsOwned = []

$("#buttonTest").append("Working")
function btnClick() {
    //console.log($("#kaigan1").attr('value'));
    let kaiganArr = $("#kaigan1").html().split("/")
    let kaiganGoalArr = $("#goalkaigan1").html().split("/")
    let shardInput = "#goalshards1"
    calcShards(kaiganArr, kaiganGoalArr, shardInput)
}

function turnGrey(attribute) {
  let melaImage = document.getElementById(attribute)
  if (melaImage.getAttribute("value") === "1") {
    melaImage.setAttribute("value", "0")
    melaImage.setAttribute("style", "width:50px; height:50px; filter:grayscale(1)")
  } else{
    melaImage.setAttribute("value", "1")
    melaImage.setAttribute("style", "width:50px; height:50px;")
  }
  console.log(melaImage.getAttribute("value"));
}

function calcShards(kaiganArr, kaiganGoalArr, shardInput) {

    const reduce = (total, curr) => total + curr;

    kaiganArr = kaiganConv(kaiganArr);
    kaiganGoalArr = kaiganConv(kaiganGoalArr)
    let something = kaiganArr.reduce(reduce)
    let something1 = kaiganGoalArr.reduce(reduce)
    $(shardInput).html(something1 - something)
}

/*
Converts Shards values to amount of shards needed for each gate
*/
function kaiganConv(arr) {
    for(let i = 0; i < arr.length; i++) {
        switch(arr[i]) {
            case "0": arr[i] = 0
            break;
            case "1": arr[i] = 5
            break;
            case "2": arr[i] = 15
            break;
            case "3": arr[i] = 30
            break;
            case "4": arr[i] = 50
            break;
        }
        //5 Gate Values
        if(arr[i] === "5") {
            if(i === 0) arr[i] = 80
            if(i === 1) arr[i] = 100
            if(i === 2) arr[i] = 90
            if(i === 3) arr[i] = 90
            if(i === 4) arr[i] = 100
        }
    }
    console.log(arr);
    return arr;
}

function function1(){
 $("#name1").html("Emmel")
 $("#kaigan1").html("5/5")
 $("#goalkaigan1").html("5/5")
 $("#shards1").html("3")

 btnClick()
}

function function2(){
 $("#name1").html("Mira")
 $("#kaigan1").html("5/2")
 $("#goalkaigan1").html("5/5")
 $("#shards1").html("3")

 btnClick()
}

function openCity(evt, cityName) {
  // Declare all variables
  var i, tabcontent, tablinks;
  
  //hideall
  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  //display
  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}

</script>

<style>
    /* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons that are used to open the tab content */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}

</style>

</html>